os:
  - windows
  - linux
  - osx
language: rust
script:
- cargo build --verbose --all
- cargo test --verbose test::test_ffi
- cargo test --verbose test::test_natpmp
- cargo doc
stages:
  - name: deploy
    if: os = linux
deploy:
  provider: cargo
  on:
    tags: true
  token:
    secure: qDqGQ7UBWZg73veaRHMRFcMsJFX2QcGcAELgZgaLlr8sx2yOUm1aWiU8KGLoZJgR4cKRYDRJ+X6YSLFiGdOcek44jRwqrjRDD9yW6OPgwMJXtQSXztbQTapul7Pmw09LH01GlwO2sBk4DE1MFcoKsfi6cHkFGanx44IICPEV1e8euxgLoPQhDaegHgCQseKefrtZkjWIGOL0YPYzpezZA0hTBw5yUC2j4mp1AxfoWg++z+fxrapR+dMCUKNWkhLoY1CMaZxQ2cOanNMwNUgQtB6ZAqSRY7WhzD4jMasBL+RgkvB2bcm4SZ+18IYT33h7QipwPWL+EaVU5FPqiQDU+cvt+CmEGKdqQiY679ME6QuqY8joBdYdzjpRXD2QVoYx5WfnwPJl+GjtWjFgcJY4B0CWplffrHEH+9c1tGcTwkDa0Q57Xnp8+/c1Iy7bCSHMiMZhO0KMrLozf3Vanzr6CFr9437y54fjXu/4CO3X1DQxjfOfX/g5WarDLgq4xY77vK/QdKRFCMjczTCi9cEy1seE1eDpjRVyfSXfh5IU9YVkponk2JAVZNgFO0Tm5bpEm7gc4K3s8r520khar/WIPSEn4GFo4b6xXZlHaWJqJp3R8iiHUbHg2F/HyuzFOGYyrCu1UN1IgYhjxkm0zp+8tIY5bUDX/6K4OPjKXRmdToY=
